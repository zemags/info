nginx
- главный процесс - чтение и проверка конфига и управление рабочими процессами
- рабочие процессы обрабатывают запросы, кол-во процессов может быть в конфиге, а может автоматом по числу доступных ядер
- конфиг как правило лежит /usr/local/nginx/conf, /etc/nginx или /usr/local/etc/nginx.

#### структура конфига
- простая директива - имя и параметр через пробел и точка с запятой ';' в конце
- блочная директива - вместо точки с запятой набор доп инструкций внутри '{}', внутри скобок можно задать другие директивы
- после '#' идет коммент

#### быстрое завершение
```
nginx -s stop
```
#### плавное завершение
```
nginx -s quit
```
#### перезагрузка конфигурационного файла
```
nginx -s reload
```
#### переоткрытие лог-файлов
```
nginx -s reopen
```
#### список всех запущенных процессов nginx
```
ps -ax | grep nginx
```

#### конфиг
```
server {
    # '/' - короткий префикс
    location / {
        # допустим /data/www лежит статика html, по запросу http://localhost/some/example.html будет /data/www/some/example.html.
        root /data/www;
    }
    # /images/ - длинный префикс, **сначала по длинным префиксам поиск**
    location /images/ {
        root /data;
    }
}
```

#### конфиг прокси сервера, частый кейс. принял запрос, отправил на один из проксируемых серверов, получил ответ, отдал клиенту
```
server {
    location / {
        proxy_pass http://localhost:8080/;
    }

    # запросы на картинки с расширением, будут идти отсюда
    location ~ \.(gif|jpg|png)$ {
        root /data/images;
    }
}
```


