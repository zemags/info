#### Три типы проблем в многопоточных программах СВАИ
- состояние гонки (race condition)
- взаимная (deadlock) и активная (livelock) блокировка
- исчерпание ресурсов (resource starvation).

#### ошибка Конкуренция\состояние гонки
- ошибка проектирования многопоточной системы или приложения, при которой работа системы или приложения зависит от того, в каком порядке выполняются части кода.
- Состояние гонки — «плавающая» ошибка (гейзенбаг), проявляющаяся в случайные моменты времени и «пропадающая» при попытке её локализовать.

#### проблема взаимной блокировки deadlock в многопоточных системах
- deadlock - ситуация в многозадачной среде или СУБД, при которой несколько процессов находятся в состоянии ожидания ресурсов, занятых друг другом, и ни один из них не может продолжать свое выполнение
- Отладка взаимных блокировок, как и других ошибок синхронизации, усложняется тем, что для их возникновения нужны специфические условия одновременного выполнения нескольких процессов (в вышеописанном примере если бы процесс 1 успел захватить ресурс B до процесса 2, то ошибка не произошла бы).

#### активная блокировка Livelock
- Это слово означает такую ситуацию: система не «застревает» (как в обычной взаимной блокировке), а занимается бесполезной работой, её состояние постоянно меняется — но, тем не менее, она «зациклилась», не производит никакой полезной работы.
- Жизненный пример такой ситуации: двое встречаются лицом к лицу. Каждый из них пытается посторониться, но они не расходятся, а несколько секунд сдвигаются в одну и ту же сторону.
- поиск с помощью графа ожидания

#### Что такое процесс?
- Программа запущенная в данный момент, структура данных, за который закреплена область памяти и другие ресурсы.
- Часто у процесса один поток, основной, но может и быть любым кол-вом.

#### Что такое цикл событий?
- это очередь заданий и цикл, который вытягивает задания из очереди и запускает их. Эти задания называются сопрограммами. Сопрограммы это небольшой набор команд которые также содержат инструкция что возвращать в очередь при необходимости.

#### Что такое зеленые потоки\green threads?
- Обычный поток, переключение между потоками производятся в коде приложения, а не в процессоре. в python gevent, eventlet.

#### Coroutine в asyncio
это специфическая функция, которая может передать ход выполнения программы другой функции при этом не теряя своего состояния. Coroutine по сути являться расширенным генератором. Одно из больших преимуществ потоков заключается в том, что они не используют много памяти для выполнения. Запомните, что когда вы вызываете функцию Coroutine, она фактически не выполняется, а возвращает объект coroutine, который возможно передать в цикл событий, чтобы он выполнился либо сразу, либо позже.

#### Future в asyncio?
- future объект предоставляет результат незавершенной работы. цикл может просматривать future объекты и ожидать их окончания, как только future объект прекратит работы цикл будет выполнен

#### Как появилась библа asyncio? простым языком
- Если бы вы написали цикл событий, в котором бы запускались генераторы, у вас получилась бы отличная асинхронная библиотека.

#### Что такое семафор?
- объект, ограничивающий количество потоков, которые могут войти в заданный участок кода. Семафоры используются для синхронизации и защиты передачи данных через разделяемую память, а также для синхронизации работы процессов и потоков.
- Некоторые из проблем, которые могут решать семафоры:
    - запрет одновременного выполнения заданных участков кода (критические секции);
    - поочерёдный доступ к критическому ресурсу (важному ресурсу, для которого невозможен (или нежелателен) одновременный доступ);
    - синхронизация процессов и потоков (например, можно инициировать обработку события отпусканием семафора).

#### Что такое GIL?
- Global interpreter lock - глобальный семафор который не дает одновременно работать больше чем одному потоку в рамках процесса интрпретатора.
  - защищает структуры данных работающего потока от проблем конкурентного доступа.
  - библы на С могут отпускать gil ипа numpy
- Когда поток начинает работу, он выполняет захват GIL. Спустя время планировщик процессов решает, что текущий поток поработал достаточно, и передает управление следующему потоку. Поток №2 видит, что GIL захвачен, так что он не продолжает работу, а погружает себя в сон, уступая процессор потоку №1. Но поток не может удерживать GIL бесконечно. До Python 3.3 GIL переключался каждые 100 инструкций машинного кода. В поздних версиях GIL может быть удержан потоком не дольше 5 мс. GIL так-же освобождается, если поток совершает системный вызов, работает с диском или сетью.

#### Что такое cpu bound?
- операции, задействующие центральный процессор: работа с матрицами, изображениями, анализ больших массивов данных, вычисление последовательности Фибоначчи или майнинг биткоинов.

#### Что такое поток(треды\нити)?
- Единицы исполнения внутри процесса. При старте потока не выделяется ресурсов, может использовать память\ресурсы породившего его процесса. За счет этого скорость.

#### Что такое асинхронное программирование?
- Асинхронное программирование — это потоковая обработка программного обеспечения / пользовательского пространства, где приложение, а не процессор, управляет потоками и переключением контекста. В асинхронном программировании контекст переключается только в заданных точках переключения, а не с периодичностью, определенной CPU.

#### Что такое mutex?
- аналог одноместного семафора, служащий впрограммировании для синхронизации одновременно выполняющихсяпотоков.
- Мьютекс отличается от семафора тем, что только владеющий импоток может его освободить, т.е. перевести в отмеченное состояние.
- Мьютексы — это один из вариантов семафорных механизмов для организации взаимного исключения. Они реализованы во многих ОС, их основное назначение — организация взаимного исключения для потоков из одного и того же или из разных процессов.
- Цель использования мьютексов — защита данных от повреждения в результате асинхронных изменений (состояние гонки), однако могут порождаться другие проблемы — например взаимная блокировка (клинч).

#### Что такое функция обратного вызова\callback?
- Обратный вызов — это функция, которая означает: «Как только это будет сделано, выполните эту функцию». Другими словами, вы звоните в службу поддержки и оставляете свой номер, чтобы они, когда будут доступны, перезвонили, вместо того, чтобы ждать их ответа.
- нужно проверять на наличие ошибки а не обрабатывать исключение, т.к. если исключение было создано, то оно не будет обрабаываться в коде из-за цикла событий. Ошибки должны быть переданы как объекты, ане обработаны в виде ошибок

#### Что такое IO bound?
- задачи, использующие ввод/вывод: работу с диском или сетью. К таковым относятся веб-сервера или часть веб-приложения, которая принимает запросы от клиентов.

#### Что такое планировщик?
- Часть ядра ОС, которая по очереди загружает потоки в центральный процессор.
- На процессе работает один поток, работает пока не израсходуете квантвремени(100мс по умолч.) или сам не уступит управление следующему потоку совершив системный вызов.